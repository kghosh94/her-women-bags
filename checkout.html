<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <!-- fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Kaushan+Script&family=Lobster+Two:ital,wght@0,400;0,700;1,400;1,700&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
        <!-- font awesome -->
        <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
        <!--  -->
        <!-- owl stylesheets -->
        <link href="https://fonts.googleapis.com/css?family=Great+Vibes|Poppins:400,700&display=swap&subset=latin-ext" rel="stylesheet">
        <!-- <link rel="stylesheet" href="css/owl.carousel.min.css">
            <link rel="stylesoeet" href="css/owl.theme.default.min.css">
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css" media="screen"> -->
        <!-- Link Swiper's CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
        <!-- bootstrap css -->
        <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
        <!-- style css -->
        <link rel="stylesheet" type="text/css" href="css/style.css">

        <link rel="stylesheet" type="text/css" href="css/responsive-two.css">
    </head>
    <body>
        
        <div class="product-banner-section">
            <!-- header top section start -->
            <div class="container">
                <div class="header_section_top" id="common-header-top">
                </div>
            </div>
            <!-- header top section start -->
            <div class="container">
                <div class="product-banner-area">
                    <div class="product-banner-row row">
                        <div class="col-12 col-lg-7 col-md-7 col-sm-12 col-xs-12 product-banner-left">
                            <div class="product-banner-title-area">
                                <h1>Shop New Arrivals</h1>
                                <p class="breadcrumb-area"><span class="previous-page">Enjoy free shipping on all orders</p>
                            </div>
                        </div>
                        <div class="col-12 col-lg-5 col-md-5 col-sm-12 col-xs-12 product-banner-right">
                            <div class="product-banner-img">
                                <img src="images/new-arrival-collection2.png" alt="Product">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
         </div>
        <div class="billing_details">
            <div class="container">
                <div class="row">
                    <div class="col-12 col-lg-6 col-md-12 col-sm-12 col-xs-12 checkout-left-area">
                        <h3>Billing Details</h3>
                        <form class="row contact_form" action="#" method="post" novalidate="novalidate">
                            <div class="col-md-6 form-group p_star">
                                <input type="text" class="form-control" id="first" name="name" required>
                                <div class="placeholder">First name <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="col-md-6 form-group p_star">
                                <input type="text" class="form-control" id="last" name="name" required>
                                <div class="placeholder">Last name <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="col-md-6 form-group p_star">
                                <input type="tel" class="form-control" id="phone-no" name="phone" required maxlength="10">
                                <div class="placeholder">Phone Number <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="col-md-6 form-group p_star">
                                <input type="email" class="form-control" id="email" name="email" required>
                                <div class="placeholder">Email Address <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input type="text" class="form-control" id="addres1" name="address1" required>
                                <div class="placeholder">Address Line 01 <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="col-md-12 form-group p_star">
                                <input type="text" class="form-control" id="addres2" name="address2" required>
                                <div class="placeholder">Address Line 02 <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="col-md-6 form-group p_star">
                                <input type="text" class="form-control" id="city" name="city" required>
                                <div class="placeholder">Town / City <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="col-md-6 form-group p_star">
                                <input type="text" class="form-control" id="state" name="state" required>
                                <div class="placeholder">State <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="col-md-6 form-group p_star">
                                <input type="text" class="form-control" id="district" name="district" required>
                                <div class="placeholder">District <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="col-md-6 form-group p_star">
                                <input type="text" class="form-control" id="zip" name="zip" required>
                                <div class="placeholder">Postcode / Zip <span class="mandatory-star">*</span></div>
                            </div>
                            <div class="payment-area">
                                <div class="payment-area-form">
                                    <div class="payment-area-head">
                                        <div class="payment-title">
                                            <h4>Debit / Credit card</h4>
                                        </div>
                                        <div class="card_ico_area">
                                            <img src="images/cards-ico.png" alt="Payment Cards">
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12 form-group p_star">
                                            <input type="tel" class="form-control" id="card-no" name="Card Number" maxlength="16" required>
                                            <div class="placeholder">Card Number <span class="mandatory-star">*</span></div>
                                        </div>
                                        <div class="col-6 col-md-6 form-group p_star mb-0">
                                            <input type="tel" class="form-control" id="exp-month-year" name="MM-YY" required>
                                            <div class="placeholder">MM/YY <span class="mandatory-star">*</span></div>
                                        </div>
                                        <div class="col-6 col-md-6 form-group p_star mb-0">
                                            <input type="tel" class="form-control" id="cvv" name="CVV" maxlength="3" required>
                                            <div class="placeholder">CVV <span class="mandatory-star">*</span></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="product-btn-group d-flex justify-content-end align-items-center">
                                    <button type="submit" class="btn_3 shop-btn pay-btn">Proceed to Pay</button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-12 col-lg-6 col-md-12 col-sm-12 col-xs-12 checkout-right-area">
                        <div class="order_box">
                            <h2>Your Order</h2>
                            <div class="order-detail-head">
                                <div class="prodcuts-list">
                                    <h5>Product</h5>
                                </div>
                                <div class="price-list">
                                    <h5>Total</h5>
                                </div>
                            </div>
                            <ul class="list" id="order-list">
                            </ul>
                            <ul class="list list_2" id="order-total-list">
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- footer section start -->
        <div class="footer_section" id="footer-section"></div>
        <!-- footer section end -->
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

        <!-- for header -->
        <script src="header.js"></script>
        <!-- for footer -->
        <script src="footer.js"></script>

        <script>
            function getCart() {
                return JSON.parse(localStorage.getItem('cart')) || [];
            }

            function renderCheckoutCart() {
                const cart = getCart();
                const tbody = document.getElementById('order-list');
                const subtotalElement = document.getElementById('checkout-subtotal');
                let subtotal = 0;
                let shippingCharge = 0;

                tbody.innerHTML = '';
                // totalList.innerHTML = '';

                if (cart.length === 0) {
                tbody.innerHTML = '<li>Your cart is empty.</li>';
                subtotalElement.textContent = '$0.00';
                return;
                }

                cart.forEach(item => {
                const total = item.price * item.quantity;
                subtotal += total;

                const row = document.createElement('li');
                console.log(total)
                row.innerHTML = `
                    <a href="#">
                        ${item.name}
                        <span class="middle">x ${item.quantity}</span>
                        <span class="last">$${total.toFixed(2)}</span>
                    </a>
                `;
                tbody.appendChild(row);
                });

                const grossTotal = subtotal + shippingCharge;
                const totalList = document.getElementById('order-total-list');
                totalList.innerHTML = `
                    <li>
                        <a href="#">
                            Shipping
                            <span>$00.00</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            total
                            <span>$${grossTotal.toFixed(2)}</span>
                        </a>
                    </li>
                `;

                // subtotalElement.textContent = '$' + subtotal.toFixed(2);
            }

            document.addEventListener('DOMContentLoaded', renderCheckoutCart);
            </script>



            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    const paymentButton = document.querySelector('.pay-btn');

                    document.getElementById('card-no').addEventListener('input', function () {
                        // Remove all non-digit characters as user types or pastes
                        this.value = this.value.replace(/\D/g, '').slice(0, 16);
                    });

                    document.getElementById('phone-no').addEventListener('input', function () {
                        // Remove all non-digit characters as user types or pastes
                        this.value = this.value.replace(/\D/g, '').slice(0, 10);
                    })

                    document.getElementById('cvv').addEventListener('input', function () {
                        // Remove all non-digit characters as user types or pastes
                        this.value = this.value.replace(/\D/g, '').slice(0, 3);
                    })

                    paymentButton.addEventListener('click', function (e) {
                        e.preventDefault(); // prevent form from submitting

                        // Clear previous errors
                        document.querySelectorAll('.error-msg').forEach(el => el.remove());

                        let isValid = true;

                        function showError(input, message) {
                            const error = document.createElement('small');
                            error.classList.add('error-msg');
                            error.style.color = 'red';
                            error.innerText = message;
                            input.parentNode.appendChild(error);
                            isValid = false;
                        }

                        const firstName = document.getElementById('first');
                        const lastName = document.getElementById('last');
                        const phone = document.getElementById('phone-no');
                        const email = document.getElementById('email');
                        const address1 = document.getElementById('addres1');
                        const address2 = document.getElementById('addres2');
                        const city = document.getElementById('city');
                        const state = document.getElementById('state');
                        const district = document.getElementById('district');
                        const zip = document.getElementById('zip');

                        //payement input
                        const cardNo = document.getElementById('card-no');
                        const exp = document.getElementById('exp-month-year');
                        const cvv = document.getElementById('cvv');

                        // Basic required field checks
                        if (firstName.value.trim() === '') showError(firstName, 'First name is required');
                        if (lastName.value.trim() === '') showError(lastName, 'Last name is required');
                        if (phone.value.trim() === '') {
                            showError(phone, 'Phone number is required');
                        } else if (!/^\d{10}$/.test(phone.value)) {
                            showError(phone, 'Phone must be 10 digits');
                        }
                        if (email.value.trim() === '') {
                            showError(email, 'Email is required');
                        } else if (!/^\S+@\S+\.\S+$/.test(email.value)) {
                            showError(email, 'Enter a valid email');
                        }
                        if (address1.value.trim() === '') showError(address1, 'Address Line 1 is required');
                        if (address2.value.trim() === '') showError(address2, 'Address Line 2 is required');
                        if (city.value.trim() === '') showError(city, 'City is required');
                        if (state.value.trim() === '') showError(state, 'State is required');
                        if (district.value.trim() === '') showError(district, 'District is required');
                        if (zip.value.trim() === '') {
                            showError(zip, 'Zip code is required');
                        } else if (!/^\d{5,6}$/.test(zip.value)) {
                            showError(zip, 'Enter a valid Zip code');
                        }

                        // Card number must be filled and 16 digits
                        if (cardNo.value.trim() === '') {
                            showError(cardNo, 'Card number is required');
                        } else if (!/^\d{16}$/.test(cardNo.value)) {
                            showError(cardNo, 'Please enter a valid 16-digit card number.');
                        }


                        // Expiry date MM/YY format
                        if (exp.value.trim()=== '') {
                            showError(exp, 'Expiry date is required');
                        } else if (!/^(0[1-9]|1[0-2])\/\d{2}$/.test(exp.value)) {
                            showError(exp, 'Expiry date must be in MM/YY format.');
                        }
                         else {
                            // Check if expiry is not in the past
                            const [month, year] = exp.value.split('/');
                            const currentDate = new Date();
                            const inputDate = new Date(`20${year}`, month); 
                            
                            if (inputDate <= currentDate) {
                                showError(exp,'Card expiry date cannot be in the past.');
                            }
                        }

                        // CVV must be filled and 3 digits
                        if (cvv.value.trim() === '') {
                            showError(cvv, 'CVV is required')
                        } else if (!/^\d{3}$/.test(cvv.value)) {
                            showError(cvv, 'Please enter a valid 3 digit CVV.');
                        }

                        
                        // If valid, submit the form or show success
                        if (isValid) {
                            // alert('Form submitted successfully!');
                            // form.submit(); // Uncomment this to actually submit
                            window.location.href = 'thank-you.html';
                        }
                    });
                });
                </script>

    </body>
</html>